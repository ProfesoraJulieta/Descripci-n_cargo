<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Profile Pro - Simulador de Perfiles</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f3f2ef; /* LinkedIn background color */
        }
        .profile-card {
            background-color: white;
            border-radius: 8px;
            border: 1px solid #ddd;
            padding: 24px;
            margin-bottom: 16px;
        }
        .form-select {
            width: 100%;
            border: 1px solid #d1d5db;
            padding: 8px;
            border-radius: 4px;
            transition: border-color 0.2s;
            border-width: 2px;
            background-color: white;
        }
        .form-select:focus {
            outline: none;
            border-color: #0a66c2; /* LinkedIn blue */
        }
        .highlight {
            background-color: #fef08a;
            padding: 2px 4px;
            border-radius: 3px;
        }
        .correct-answer {
            border-color: #22c55e;
        }
        .incorrect-answer {
            border-color: #ef4444;
        }
        .profile-strength-bar {
            background-color: #e0e0e0;
            border-radius: 9999px;
            height: 8px;
            width: 100%;
            overflow: hidden;
        }
        .profile-strength-progress {
            background-color: #0a66c2;
            height: 100%;
            width: 0%;
            transition: width 0.5s ease-in-out;
        }
    </style>
</head>
<body class="p-4 sm:p-6 md:p-8">
    <div class="max-w-7xl mx-auto">

        <!-- Panel de Control -->
        <div class="bg-white p-4 rounded-lg shadow-md mb-6 border">
             <div class="flex justify-center items-center gap-3 mb-2">
                <!-- Logo de Profile Pro -->
                <svg width="40" height="40" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M14 2H6C4.89543 2 4 2.89543 4 4V20C4 21.1046 4.89543 22 6 22H18C19.1046 22 20 21.1046 20 20V8L14 2Z" fill="#dbeafe"/>
                    <path d="M14 2H6C4.89543 2 4 2.89543 4 4V20C4 21.1046 4.89543 22 6 22H18C19.1046 22 20 21.1046 20 20V8L14 2Z" stroke="#0a66c2" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                    <path d="M14 2V8H20" stroke="#0a66c2" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                    <circle cx="12" cy="14" r="2" stroke="#0a66c2" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                    <path d="M10 19C10 17.8954 10.8954 17 12 17C13.1046 17 14 17.8954 14 19" stroke="#0a66c2" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
                <h2 class="text-3xl font-bold text-gray-800">Profile Pro</h2>
             </div>
             <h3 class="text-lg font-semibold text-gray-600 mb-4 text-center">Consola de Reclutamiento</h3>
             <div class="flex flex-col gap-4 mb-4">
                <button id="btnNewCase" class="w-full bg-blue-700 text-white px-4 py-3 rounded-md text-lg font-bold hover:bg-blue-800 transition-colors">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="inline-block mr-2"><path d="M17 18a2 2 0 0 0-2-2H9a2 2 0 0 0-2 2"/><rect width="18" height="18" x="3" y="4" rx="2"/><circle cx="12" cy="10" r="2"/><line x1="8" x2="8" y1="2" y2="4"/><line x1="16" x2="16" y1="2" y2="4"/></svg>
                    Buscar Nuevo Candidato
                </button>
                <div class="grid grid-cols-2 sm:grid-cols-4 gap-2">
                    <button id="btnHints" class="w-full bg-green-500 text-white px-4 py-2 rounded-md hover:bg-green-600 transition-colors">游눠 Mostrar Pistas</button>
                    <button id="btnCheck" class="w-full bg-yellow-500 text-white px-4 py-2 rounded-md hover:bg-yellow-600 transition-colors">九덢잺 Verificar Perfil</button>
                    <button id="btnShowAnswers" class="w-full bg-gray-600 text-white px-4 py-2 rounded-md hover:bg-gray-700 transition-colors">游 Autocompletar</button>
                    <button id="btnClear" class="w-full bg-red-500 text-white px-4 py-2 rounded-md hover:bg-red-600 transition-colors">Limpiar Perfil</button>
                </div>
            </div>
             <p id="completion-message" class="font-semibold mt-2 h-6 text-center"></p>
        </div>

        <!-- Layout de Perfil -->
        <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
            <!-- Columna Izquierda: Perfil y Detalles -->
            <div class="lg:col-span-2 flex flex-col gap-6">
                <!-- Tarjeta de Perfil Principal -->
                <div class="profile-card shadow-md">
                    <div class="h-32 bg-gray-200 rounded-t-lg -mx-6 -mt-6">
                         <!-- Banner eliminado -->
                    </div>
                    <div class="flex items-end -mt-16 ml-4">
                        <div class="w-32 h-32 bg-gray-300 rounded-full border-4 border-white flex items-center justify-center overflow-hidden">
                             <img id="profile-pic" src="https://placehold.co/128x128/e0e0e0/757575?text=?" alt="Avatar">
                        </div>
                    </div>
                    <div class="mt-4">
                        <h1 id="profile-name" class="text-2xl font-bold text-gray-900">Nombre del Candidato</h1>
                        <p id="profile-area" class="text-md text-gray-600">츼rea de especializaci칩n</p>
                        <p id="profile-location" class="text-sm text-gray-500 mt-1">Lugar de Trabajo</p>
                    </div>
                    <div class="mt-4">
                         <h3 class="text-sm font-semibold text-gray-600">FUERZA DEL PERFIL</h3>
                         <div class="profile-strength-bar mt-1"><div id="profile-strength-progress" class="profile-strength-progress"></div></div>
                         <p id="profile-strength-text" class="text-sm font-bold text-blue-700 mt-1"></p>
                    </div>
                </div>

                <!-- Tarjeta "Acerca de" -->
                <div class="profile-card shadow-md">
                    <h2 class="text-xl font-bold text-gray-800 mb-2">Acerca de</h2>
                    <p class="text-gray-500 mb-2">Este es el objetivo principal del candidato en su puesto. 춰Elige la descripci칩n correcta!</p>
                    <select id="select-objetivo" class="form-select"></select>
                </div>
                
                <!-- Tarjeta "Experiencia" -->
                <div class="profile-card shadow-md">
                    <h2 class="text-xl font-bold text-gray-800 mb-4">Experiencia</h2>
                    <div class="flex flex-col gap-4">
                        <div>
                            <label class="font-semibold text-gray-700">Principales Funciones</label>
                            <select id="select-funciones" class="form-select mt-1"></select>
                        </div>
                        <div>
                            <label class="font-semibold text-gray-700">Tareas Clave</label>
                            <select id="select-tareas" class="form-select mt-1"></select>
                        </div>
                        <div>
                            <label class="font-semibold text-gray-700">A침os de experiencia requeridos</label>
                            <select id="select-experiencia" class="form-select mt-1"></select>
                        </div>
                         <div>
                            <label class="font-semibold text-gray-700">Reporta a (Direcci칩n)</label>
                            <select id="select-direccion" class="form-select mt-1"></select>
                        </div>
                    </div>
                </div>
                
                <!-- Tarjeta "Educaci칩n" -->
                <div class="profile-card shadow-md">
                    <h2 class="text-xl font-bold text-gray-800 mb-2">Educaci칩n</h2>
                    <label class="font-semibold text-gray-700">Formaci칩n Acad칠mica</label>
                    <select id="select-formacion" class="form-select mt-1"></select>
                </div>

                <!-- Tarjeta "Aptitudes" -->
                <div class="profile-card shadow-md">
                    <h2 class="text-xl font-bold text-gray-800 mb-4">Aptitudes y Conocimientos</h2>
                     <div class="flex flex-col gap-4">
                        <div>
                            <label class="font-semibold text-gray-700">Conocimientos Formales</label>
                            <select id="select-conocimientos" class="form-select mt-1"></select>
                        </div>
                        <div>
                            <label class="font-semibold text-gray-700">Especializaci칩n de la Unidad</label>
                            <select id="select-unidad" class="form-select mt-1"></select>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Columna Derecha: Resumen del Puesto y Pistas -->
            <div class="lg:col-span-1 flex flex-col gap-6">
                 <div class="bg-white p-4 rounded-lg shadow-md border sticky top-6">
                    <h2 class="text-xl font-bold text-gray-800 mb-2">Descripci칩n del Cargo</h2>
                    <p class="text-sm text-gray-500 mb-4">Lee atentamente el siguiente texto para encontrar la informaci칩n y completar el perfil del candidato.</p>
                    <div id="texto-container" class="bg-gray-50 p-3 border rounded-md max-h-[500px] overflow-y-auto">
                        <p class="text-gray-600">Presiona "Buscar Nuevo Candidato" para comenzar.</p>
                    </div>
                    <div class="mt-4 p-3 bg-amber-100 border border-amber-300 rounded-md">
                         <h3 class="font-bold text-amber-800">Interacciones Clave</h3>
                         <div class="flex flex-col gap-2 mt-2">
                             <div>
                                <label class="text-sm font-semibold text-gray-700">Relaciones Internas</label>
                                <select id="select-relacionesInternas" class="form-select mt-1"></select>
                             </div>
                             <div>
                                <label class="text-sm font-semibold text-gray-700">Relaciones Externas</label>
                                <select id="select-relacionesExternas" class="form-select mt-1"></select>
                             </div>
                         </div>
                    </div>
                     <div class="mt-4 p-3 bg-red-100 border border-red-300 rounded-md">
                         <h3 class="font-bold text-red-800">Condiciones y Riesgos</h3>
                         <div class="flex flex-col gap-2 mt-2">
                              <div>
                                <label class="font-semibold text-gray-700">Riesgos del Puesto</label>
                                <select id="select-riesgos" class="form-select mt-1"></select>
                             </div>
                         </div>
                    </div>
                     <div id="score-container" class="mt-4 text-center">
                        <p class="text-lg font-semibold text-gray-800 bg-green-200 px-3 py-1 rounded-full">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="inline-block mr-1 h-5 w-5"><path d="M12.22 2h-4.44a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8.34"/><path d="M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z"/></svg>
                            Perfiles Completados: <span id="correct-cases-count">0</span>
                        </p>
                    </div>
                 </div>
            </div>
        </div>

    </div>

    <script>
        const data = {
            caso1: {
                title: "Coordinador/a de Log칤stica (Transportes)",
                text: `La empresa "Transportes Veloz" necesita un Coordinador de Log칤stica para su centro de distribuci칩n en Santiago. El objetivo principal del puesto es asegurar que los despachos de productos se realicen de manera eficiente y puntual. La persona seleccionada ser치 responsable de planificar las rutas diarias de los camiones, optimizando los tiempos y costos. Para ello, deber치 asignar los veh칤culos a los transportistas cada ma침ana, verificar la correcta carga de la mercanc칤a y mantener una comunicaci칩n constante con los conductores durante su recorrido. Tambi칠n se encargar치 de resolver cualquier incidencia que pueda surgir en la ruta. Este rol exige una coordinaci칩n diaria con el equipo de Bodega para confirmar la disponibilidad de productos y con el 치rea de Ventas para conocer los pedidos de los clientes. Ocasionalmente, deber치 contactar a proveedores de transporte externos para solicitar apoyo en temporadas de alta demanda. El trabajo se realiza presencialmente en el centro de distribuci칩n, un lugar con alto flujo de maquinaria pesada, por lo que el uso de elementos de seguridad es obligatorio. Se requiere formaci칩n t칠cnica en Log칤stica o carrera af칤n y al menos 2 a침os de experiencia en cargos similares.`
            },
            caso2: {
                title: "Asistente de Marketing Digital (Agencia)",
                text: `En la agencia "Creatividad Infinita", buscamos un Asistente de Marketing Digital para unirse a nuestro equipo de Comunicaciones. El prop칩sito del cargo es apoyar en la ejecuci칩n de las campa침as digitales de nuestros clientes para aumentar su visibilidad en l칤nea. Sus funciones principales incluyen la gesti칩n de redes sociales y la creaci칩n de contenido. Diariamente, deber치 programar las publicaciones para Instagram y Facebook, responder comentarios y mensajes de la comunidad, y redactar textos breves para los posts. Adem치s, colaborar치 en la elaboraci칩n de un informe mensual de resultados, midiendo el alcance y la interacci칩n de las publicaciones. Para este puesto, es fundamental el trabajo en equipo con los Dise침adores Gr치ficos y con los Ejecutivos de Cuentas. El lugar de trabajo es en nuestra oficina en Providencia, con modalidad h칤brida. Buscamos a alguien con estudios en Publicidad, Periodismo o similar. No se requiere experiencia previa, pero s칤 conocimientos demostrables en manejo de redes sociales.`
            },
            caso3: {
                title: "Jefe de Control de Calidad (Alimentos)",
                text: `Una empresa productora de alimentos requiere un Jefe de Control de Calidad para su planta de producci칩n, reportando al Gerente de Planta. El objetivo principal es asegurar que todos los productos cumplan con las normativas sanitarias y los est치ndares internos de la compa침칤a. Ser치 responsable de supervisar al equipo de inspectores de calidad, gestionar el laboratorio de an치lisis, y liderar las auditor칤as internas y externas (HACCP, BPM). Diariamente, deber치 revisar los reportes de producci칩n, liberar o rechazar lotes de productos y capacitar al personal en buenas pr치cticas de manufactura. Es vital la comunicaci칩n con el 치rea de Producci칩n para corregir desviaciones y con el 치rea de Compras para validar la calidad de las materias primas. Se exige t칤tulo de Ingeniero en Alimentos o carrera af칤n y 5 a침os de experiencia en la industria alimenticia.`
            },
            caso4: {
                title: "Analista de Datos (Retail)",
                text: `Una empresa de retail busca un Analista de Datos para su Gerencia Comercial. El objetivo del puesto es analizar las tendencias de ventas y el comportamiento de los clientes para generar insights que apoyen la toma de decisiones estrat칠gicas. El analista ser치 responsable de extraer y procesar grandes vol칰menes de datos usando SQL y Python. Sus tareas diarias incluyen la creaci칩n de dashboards y visualizaciones en Power BI, la elaboraci칩n de informes peri칩dicos para la gerencia y la presentaci칩n de sus hallazgos al equipo de marketing. Es crucial la colaboraci칩n con el 치rea de TI para asegurar la calidad y disponibilidad de los datos. Se requiere un t칤tulo en Estad칤stica, Ingenier칤a Inform치tica o carrera af칤n, y un m칤nimo de 2 a침os de experiencia en roles similares. La modalidad de trabajo es h칤brida.`
            },
            caso5: {
                title: "Gerente de RRHH (Startup)",
                text: `Una startup tecnol칩gica en crecimiento necesita un Gerente de Recursos Humanos que reporte directamente al CEO. El objetivo principal es supervisar el ciclo de vida completo del empleado, desde la atracci칩n hasta la desvinculaci칩n. Ser치 responsable de liderar los procesos de reclutamiento y selecci칩n, coordinar el onboarding de nuevos talentos, administrar el sistema de gesti칩n del desempe침o y desarrollar iniciativas que fortalezcan la cultura de la empresa. Deber치 trabajar de cerca con los l칤deres de todas las 치reas para entender sus necesidades de personal. Ocasionalmente, tratar치 con consultoras externas para b칰squedas de perfiles ejecutivos. Buscamos un profesional con al menos 5 a침os de experiencia en RRHH, preferiblemente en el sector tecnol칩gico. El rol es 100% remoto.`
            },
            caso6: {
                title: "Contador General (Constructora)",
                text: `Una empresa constructora requiere un Contador General para su 치rea de Finanzas. La persona depender치 del Gerente de Finanzas y su objetivo ser치 gestionar los registros financieros de la compa침칤a, asegurando el cumplimiento de las normativas vigentes. Sus funciones principales son la preparaci칩n de declaraciones de impuestos mensuales y anuales, la ejecuci칩n de los cierres contables y el an치lisis de cuentas. Diariamente, registrar치 transacciones, conciliar치 cuentas bancarias y emitir치 informes para la gerencia. Mantendr치 contacto directo con el Servicio de Impuestos Internos (SII) y con auditores externos durante las revisiones anuales. Se requiere t칤tulo de Contador Auditor y 3 a침os de experiencia. Es indispensable un conocimiento s칩lido de las leyes tributarias locales. El trabajo es presencial en la oficina principal.`
            },
            caso7: {
                title: "Ejecutivo de Ventas (SaaS)",
                text: `Una compa침칤a SaaS (Software as a Service) est치 contratando un Ejecutivo de Ventas para su equipo comercial. El objetivo del cargo es vender un software de gesti칩n de proyectos a nuevos clientes corporativos (B2B). El rol implica un ciclo de venta completo: desde la prospecci칩n de clientes potenciales y el primer contacto, pasando por la realizaci칩n de demostraciones del software, hasta la negociaci칩n y el cierre de los contratos. Deber치 colaborar estrechamente con el equipo de marketing para alinear estrategias de generaci칩n de leads y con el equipo de soporte para asegurar una buena experiencia post-venta. Se requiere experiencia de 2 a침os en ventas B2B, idealmente de software, y excelentes habilidades de comunicaci칩n. El trabajo es en modalidad h칤brida y la compensaci칩n incluye un sueldo base m치s comisiones por ventas.`
            },
            caso8: {
                title: "Dise침ador UX/UI (App M칩vil)",
                text: `Una empresa de desarrollo de aplicaciones m칩viles busca un Dise침ador UX/UI para su equipo de Producto. El objetivo es dise침ar experiencias de usuario intuitivas y atractivas para nuevas funcionalidades de la app. El dise침ador ser치 responsable de todo el proceso de dise침o, desde la investigaci칩n de usuarios y la creaci칩n de user flows, hasta el dise침o de wireframes y mockups de alta fidelidad. Sus tareas incluyen la creaci칩n de prototipos interactivos en Figma y la colaboraci칩n directa con Product Managers para definir requerimientos y con Desarrolladores para asegurar una correcta implementaci칩n. Se requiere un portafolio que demuestre experiencia en dise침o de apps y al menos 3 a침os de experiencia. El trabajo es 100% remoto.`
            },
            caso9: {
                title: "Jefe de Bodega (Alimentos)",
                text: `Una empresa de distribuci칩n de alimentos busca un Jefe de Bodega para su centro de distribuci칩n principal. El objetivo del puesto es garantizar la eficiencia y seguridad de todas las operaciones de la bodega. Ser치 responsable de gestionar el inventario, supervisar a un equipo de 20 operarios, y asegurar el cumplimiento de los protocolos de seguridad y calidad. Sus funciones incluyen la planificaci칩n de la recepci칩n y despacho de mercanc칤as, la optimizaci칩n del layout de la bodega para maximizar el espacio, y el control de la rotaci칩n de productos (FIFO). Deber치 coordinarse con el 치rea de Compras para gestionar el stock y con Log칤stica para la planificaci칩n de despachos. Se necesita experiencia de 4 a침os en un rol similar y es crucial el manejo de alg칰n sistema de gesti칩n de bodegas (WMS).`
            },

            answers: {},
            options: {}
        };

        function initializeData() {
            // Respuestas Correctas
            data.answers.caso1 = { nombreCargo: "Coordinador de Log칤stica", area: "Log칤stica", direccion: "No especificado.", unidad: "Centro de distribuci칩n", objetivo: "Asegurar que los despachos de productos se realicen de manera eficiente y puntual.", funciones: "Planificar las rutas diarias de los camiones, optimizando los tiempos y costos.", tareas: "Asignar veh칤culos, verificar carga, comunicaci칩n con conductores, resolver incidencias.", relacionesInternas: "Coordinaci칩n diaria con Bodega y Ventas.", relacionesExternas: "Proveedores de transporte externos.", formacion: "T칠cnica en Log칤stica o af칤n.", experiencia: "2 a침os.", conocimientos: "No especificado.", lugar: "Centro de distribuci칩n en Santiago.", riesgos: "Alto flujo de maquinaria pesada." };
            data.answers.caso2 = { nombreCargo: "Asistente de Marketing Digital", area: "Marketing", direccion: "No especificado.", unidad: "Comunicaciones", objetivo: "Apoyar en la ejecuci칩n de las campa침as digitales de los clientes para aumentar su visibilidad en l칤nea.", funciones: "Gesti칩n de redes sociales y creaci칩n de contenido.", tareas: "Programar publicaciones, responder comentarios, redactar textos y elaborar informes.", relacionesInternas: "Dise침adores Gr치ficos y Ejecutivos de Cuentas.", relacionesExternas: "Clientes de la agencia.", formacion: "Publicidad, Periodismo o similar.", experiencia: "No se requiere.", conocimientos: "Manejo de redes sociales.", lugar: "Oficina en Providencia, modalidad h칤brida.", riesgos: "No especificado." };
            data.answers.caso3 = { nombreCargo: "Jefe de Control de Calidad", area: "Producci칩n", direccion: "Gerencia de Planta", unidad: "Control de Calidad", objetivo: "Asegurar que todos los productos cumplan con las normativas sanitarias y los est치ndares internos.", funciones: "Supervisar inspectores, gestionar laboratorio y liderar auditor칤as (HACCP, BPM).", tareas: "Revisar reportes, liberar/rechazar lotes y capacitar al personal.", relacionesInternas: "츼rea de Producci칩n y Compras.", relacionesExternas: "Auditores externos.", formacion: "Ingeniero en Alimentos o af칤n.", experiencia: "5 a침os.", conocimientos: "Normativas sanitarias, HACCP, BPM.", lugar: "Planta de producci칩n.", riesgos: "No especificado." };
            data.answers.caso4 = { nombreCargo: "Analista de Datos", area: "Comercial", direccion: "Gerencia Comercial", unidad: "An치lisis de Datos", objetivo: "Analizar tendencias de ventas y comportamiento de clientes para generar insights.", funciones: "Extraer y procesar grandes vol칰menes de datos usando SQL y Python.", tareas: "Crear dashboards en Power BI, elaborar informes y presentar hallazgos.", relacionesInternas: "츼rea de TI y equipo de marketing.", relacionesExternas: "No especificado.", formacion: "Estad칤stica, Ingenier칤a Inform치tica o af칤n.", experiencia: "2 a침os.", conocimientos: "SQL, Python, Power BI.", lugar: "Modalidad h칤brida.", riesgos: "No especificado." };
            data.answers.caso5 = { nombreCargo: "Gerente de Recursos Humanos", area: "RRHH", direccion: "CEO", unidad: "Gesti칩n de Personas", objetivo: "Supervisar el ciclo de vida completo del empleado, desde la atracci칩n hasta la desvinculaci칩n.", funciones: "Liderar reclutamiento, coordinar onboarding y administrar gesti칩n del desempe침o.", tareas: "Desarrollar iniciativas de cultura, entender necesidades de personal.", relacionesInternas: "L칤deres de todas las 치reas.", relacionesExternas: "Consultoras externas.", formacion: "No especificado.", experiencia: "5 a침os.", conocimientos: "Preferiblemente en sector tecnol칩gico.", lugar: "100% remoto.", riesgos: "No especificado." };
            data.answers.caso6 = { nombreCargo: "Contador General", area: "Finanzas", direccion: "Gerencia de Finanzas", unidad: "Contabilidad", objetivo: "Gestionar los registros financieros de la compa침칤a, asegurando el cumplimiento normativo.", funciones: "Preparaci칩n de impuestos, cierres contables y an치lisis de cuentas.", tareas: "Registrar transacciones, conciliar cuentas bancarias y emitir informes.", relacionesInternas: "Gerencia.", relacionesExternas: "Servicio de Impuestos Internos (SII) y auditores externos.", formacion: "Contador Auditor.", experiencia: "3 a침os.", conocimientos: "S칩lido conocimiento de leyes tributarias locales.", lugar: "Oficina principal (presencial).", riesgos: "No especificado." };
            data.answers.caso7 = { nombreCargo: "Ejecutivo de Ventas", area: "Comercial", direccion: "No especificado.", unidad: "Ventas B2B", objetivo: "Vender un software de gesti칩n de proyectos a nuevos clientes corporativos (B2B).", funciones: "Ciclo de venta completo: prospecci칩n, demostraciones, negociaci칩n y cierre.", tareas: "Colaborar con marketing para generaci칩n de leads.", relacionesInternas: "Equipo de marketing y soporte.", relacionesExternas: "Clientes corporativos.", formacion: "No especificado.", experiencia: "2 a침os.", conocimientos: "Ventas B2B, idealmente de software.", lugar: "Modalidad h칤brida.", riesgos: "No especificado." };
            data.answers.caso8 = { nombreCargo: "Dise침ador UX/UI", area: "Producto", direccion: "No especificado.", unidad: "Dise침o de Producto", objetivo: "Dise침ar experiencias de usuario intuitivas y atractivas para nuevas funcionalidades de la app.", funciones: "Investigaci칩n de usuarios, creaci칩n de user flows, dise침o de wireframes y mockups.", tareas: "Creaci칩n de prototipos interactivos en Figma.", relacionesInternas: "Product Managers y Desarrolladores.", relacionesExternas: "Usuarios de la app.", formacion: "No especificado.", experiencia: "3 a침os.", conocimientos: "Portafolio en dise침o de apps, Figma.", lugar: "100% remoto.", riesgos: "No especificado." };
            data.answers.caso9 = { nombreCargo: "Jefe de Bodega", area: "Log칤stica", direccion: "No especificado.", unidad: "Centro de distribuci칩n", objetivo: "Garantizar la eficiencia y seguridad de todas las operaciones de la bodega.", funciones: "Gestionar inventario, supervisar a 20 operarios y asegurar cumplimiento de protocolos.", tareas: "Planificar recepci칩n/despacho, optimizar layout, controlar rotaci칩n FIFO.", relacionesInternas: "츼rea de Compras y Log칤stica.", relacionesExternas: "No especificado.", formacion: "No especificado.", experiencia: "4 a침os.", conocimientos: "Manejo de sistema WMS.", lugar: "Centro de distribuci칩n.", riesgos: "No especificado." };

            function generateDistractors(field, correctAnswer) {
                const pool = {
                    nombreCargo: ["Jefe de Bodega", "Asistente de Marketing", "Gerente de RRHH", "Contador General", "Dise침ador UX/UI", "Analista de Datos", "Supervisor de Producci칩n"],
                    area: ["Ventas", "Operaciones", "Finanzas", "Tecnolog칤a", "Producci칩n", "Recursos Humanos"],
                    direccion: ["Gerencia General", "Direcci칩n Comercial", "Subgerencia de TI", "Departamento de Finanzas", "Gerencia de Operaciones", "Gerencia de Planta", "CEO"],
                    unidad: ["Ventas Online", "Soporte T칠cnico", "Tesorer칤a", "Relaciones Laborales", "Log칤stica Inversa", "Control de Gesti칩n"],
                    objetivo: ["Reducir costos operativos en un 20%", "Aumentar la satisfacci칩n del cliente", "Implementar un nuevo software ERP", "Desarrollar un nuevo producto", "Expandir la empresa a nuevos mercados"],
                    funciones: ["Realizar auditor칤as internas", "Gestionar campa침as en redes sociales", "Negociar con proveedores", "Desarrollar c칩digo para la web", "Reclutar nuevo personal"],
                    tareas: ["Pagar sueldos", "Dise침ar folletos", "Formatear computadores", "Archivar documentos", "Llamar a clientes morosos", "Limpiar la oficina"],
                    relacionesInternas: ["Equipo de Finanzas", "Departamento de TI", "츼rea de Marketing", "Gerencia General", "Recursos Humanos"],
                    relacionesExternas: ["Proveedores", "Clientes", "Agencias de publicidad", "Bancos", "Servicio de Impuestos Internos"],
                    formacion: ["Ingenier칤a Comercial", "Psicolog칤a", "Dise침o Gr치fico", "Contador Auditor", "T칠cnico Jur칤dico", "Periodismo"],
                    experiencia: ["Menos de 1 a침o", "1 a침o", "4 a침os", "6 a침os", "10 a침os", "No se requiere"],
                    conocimientos: ["Normas ISO 9001", "Legislaci칩n tributaria", "Software de dise침o Adobe", "Lenguajes de programaci칩n", "T칠cnicas de venta", "Primeros auxilios"],
                    lugar: ["Modalidad 100% remota", "Oficina central", "En terreno visitando clientes", "Planta de producci칩n", "Centro de distribuci칩n", "Modalidad H칤brida"],
                    riesgos: ["Trabajo en altura", "Exposici칩n a qu칤micos", "Riesgos ergon칩micos", "Estr칠s laboral", "Accidentes de tr치nsito", "Bajo riesgo (oficina)"]
                };
                let distractors = new Set();
                while (distractors.size < 5) {
                    const randomDistractor = pool[field][Math.floor(Math.random() * pool[field].length)];
                    if (randomDistractor.toLowerCase() !== correctAnswer.toLowerCase()) {
                        distractors.add(randomDistractor);
                    }
                }
                return Array.from(distractors);
            }

            Object.keys(data.answers).forEach(caseKey => {
                const distractors = {};
                const variant = data.answers[caseKey];
                Object.keys(variant).forEach(field => {
                    distractors[field] = generateDistractors(field, variant[field]);
                });
                data.options[caseKey] = distractors;
            });
        }
        
        initializeData();

        const btnNewCase = document.getElementById('btnNewCase');
        const btnHints = document.getElementById('btnHints');
        const btnCheck = document.getElementById('btnCheck');
        const btnShowAnswers = document.getElementById('btnShowAnswers');
        const btnClear = document.getElementById('btnClear');
        const textoContainer = document.getElementById('texto-container');
        const formSelects = document.querySelectorAll('.form-select');
        const profileName = document.getElementById('profile-name');
        const profileArea = document.getElementById('profile-area');
        const profileLocation = document.getElementById('profile-location');
        const strengthProgress = document.getElementById('profile-strength-progress');
        const strengthText = document.getElementById('profile-strength-text');
        const profilePic = document.getElementById('profile-pic');
        
        const completionMessage = document.getElementById('completion-message');
        const correctCasesCounter = document.getElementById('correct-cases-count');

        let currentCaseKey = null;
        let correctCasesCount = 0;
        let currentCaseCounted = false;
        let answersWereShown = false;
        
        const shuffleArray = (array) => {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        };

        function updateScore() {
            if (!currentCaseKey) return;

            const correctAnswers = data.answers[currentCaseKey];
            let correctCount = 0;
            const fieldsToCheck = [...formSelects].map(s => s.id.replace('select-', ''));
            
            fieldsToCheck.forEach(field => {
                 const select = document.getElementById(`select-${field}`);
                 if (select && select.value && select.value === correctAnswers[field]) {
                    correctCount++;
                }
            });

            const totalFields = fieldsToCheck.length;
            const percentage = totalFields > 0 ? (correctCount / totalFields) * 100 : 0;
            strengthProgress.style.width = `${percentage}%`;

            if (percentage < 30) {
                strengthText.textContent = "Perfil Principiante";
                strengthProgress.className = 'profile-strength-progress bg-red-500';
            } else if (percentage < 70) {
                strengthText.textContent = "Perfil Intermedio";
                strengthProgress.className = 'profile-strength-progress bg-yellow-500';
            } else if (percentage < 100) {
                strengthText.textContent = "Perfil Avanzado";
                strengthProgress.className = 'profile-strength-progress bg-blue-700';
            } else {
                strengthText.textContent = "춰PERFIL ESTELAR!";
                strengthProgress.className = 'profile-strength-progress bg-green-500';
            }

            if (correctCount === totalFields) {
                if (answersWereShown) {
                    completionMessage.textContent = '춰PERFIL AUTOCOMPLETADO!';
                    completionMessage.className = 'font-semibold mt-2 h-6 text-center text-red-500 text-xl';
                } else {
                    completionMessage.textContent = '춰Excelente! 춰Has completado el perfil correctamente!';
                    completionMessage.className = 'font-semibold mt-2 h-6 text-center text-green-600';
                    if (!currentCaseCounted) {
                        correctCasesCount++;
                        correctCasesCounter.textContent = correctCasesCount;
                        currentCaseCounted = true;
                    }
                }
            } else {
                 completionMessage.textContent = '';
            }
        }

        function populateSelects() {
            if (!currentCaseKey) return;
            const correctAnswers = data.answers[currentCaseKey];
            const options = data.options[currentCaseKey];

            formSelects.forEach(select => {
                const field = select.id.replace('select-', '');
                select.innerHTML = '';
                
                const defaultOption = document.createElement('option');
                defaultOption.value = "";
                defaultOption.textContent = "Selecciona una opci칩n";
                defaultOption.disabled = true;
                defaultOption.selected = true;
                select.appendChild(defaultOption);
                
                const allOptions = [correctAnswers[field], ...options[field]];
                const shuffledOptions = shuffleArray(allOptions);
                
                shuffledOptions.forEach(opt => {
                    const optionElement = document.createElement('option');
                    optionElement.value = opt;
                    optionElement.textContent = opt;
                    select.appendChild(optionElement);
                });
            });
        }
        
        function displayCurrentCase(highlight = false) {
             if (!currentCaseKey) return;
            const caseData = data[currentCaseKey];
            const correctAnswers = data.answers[currentCaseKey];
            let text = caseData.text;
            
            // Populate header
            profileName.textContent = correctAnswers.nombreCargo;
            profileArea.textContent = `Profesional del 치rea de ${correctAnswers.area}`;
            profileLocation.textContent = correctAnswers.lugar;
            profilePic.src = `https://placehold.co/128x128/a3bde3/ffffff?text=${correctAnswers.nombreCargo.substring(0,1)}`;
            
            // Populate text box
            if (highlight) {
                const allCorrectAnswers = Object.values(correctAnswers);
                const uniqueHints = [...new Set(allCorrectAnswers)].sort((a, b) => b.length - a.length);
                uniqueHints.forEach(hint => {
                    if (hint && hint.toLowerCase() !== "no especificado.") {
                        const regex = new RegExp(hint.replace(/[-\/\\^$*+?.()|[\]{}]/g, '\\$&'), 'gi');
                        text = text.replace(regex, `<span class="highlight">$&</span>`);
                    }
                });
            }

            textoContainer.innerHTML = `<p class="text-gray-700 leading-relaxed">${text}</p>`;
            [btnHints, btnCheck, btnShowAnswers, btnClear].forEach(btn => btn.disabled = false);
        }

        function loadRandomCase() {
            const caseKeys = Object.keys(data).filter(k => k.startsWith('caso'));
            currentCaseKey = caseKeys[Math.floor(Math.random() * caseKeys.length)];
            
            answersWereShown = false;
            currentCaseCounted = false;
            
            formSelects.forEach(s => s.className = 'form-select');
            completionMessage.textContent = '';
            populateSelects();
            displayCurrentCase();
            updateScore();
        }
        
        btnNewCase.addEventListener('click', loadRandomCase);
        btnHints.addEventListener('click', () => displayCurrentCase(true));

        btnCheck.addEventListener('click', () => {
            if (!currentCaseKey) return;
            const correctAnswers = data.answers[currentCaseKey];
            formSelects.forEach(select => {
                const field = select.id.replace('select-', '');
                if (select.value === "") return;
                select.className = select.value === correctAnswers[field] ? 'form-select correct-answer' : 'form-select incorrect-answer';
            });
        });

        btnShowAnswers.addEventListener('click', () => {
            if (!currentCaseKey) return;
            currentCaseCounted = true;
            answersWereShown = true;
            const correctAnswers = data.answers[currentCaseKey];
            formSelects.forEach(select => {
                const field = select.id.replace('select-', '');
                select.value = correctAnswers[field];
                select.className = 'form-select correct-answer';
            });
            updateScore();
        });
        
        btnClear.addEventListener('click', () => {
             if(currentCaseKey) {
                populateSelects();
                formSelects.forEach(s => s.className = 'form-select');
                displayCurrentCase();
                updateScore();
             }
        });
        
        formSelects.forEach(select => select.addEventListener('change', updateScore));

        // Initial state
        [btnHints, btnCheck, btnShowAnswers, btnClear].forEach(btn => btn.disabled = true);
        strengthText.textContent = "Completa el perfil";
    </script>
</body>
</html>
